<!-- Alerts widget (English comments only) -->
<div class="card maritime-card shadow-sm">
  <div class="card-header bg-danger text-white">
    <i class="bi bi-exclamation-triangle"></i> Alerts
  </div>
  <div class="card-body">
    <ul id="alertsList" class="list-group list-group-flush small">
      <li class="list-group-item text-center">
        <div class="spinner-border text-danger" role="status"></div>
        <div class="mt-2">Checking alerts...</div>
      </li>
    </ul>
  </div>
</div>

<script>
/* Alerts widget: fetch /maritime/api/alerts */
(async function loadAlerts() {
  const container = document.getElementById('alertsList');
  const res = await fetchSafeJson('/maritime/api/alerts');
  container.innerHTML = '';
  if (res.ok) {
    const alerts = (res.data && res.data.alerts) || [];
    if (!alerts.length) {
      container.innerHTML = '<li class="list-group-item">No active alerts</li>';
      return;
    }
    for (const a of alerts.slice(0, 5)) {
      const li = document.createElement('li');
      li.className = 'list-group-item';
      li.innerHTML = `<strong>${a.type || 'Alert'}</strong> — ${a.message || ''}<br><small class="text-muted">${a.priority || ''}</small>`;
      container.appendChild(li);
    }
  } else {
    container.innerHTML = `<li class="list-group-item text-warning">Alerts unavailable — ${res.message || 'fallback'}</li>`;
  }
})();
</script>
