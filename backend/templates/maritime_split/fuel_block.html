<!-- Fuel widget -->
<div class="card maritime-card shadow-sm">
  <div class="card-header bg-warning text-dark">
    <i class="bi bi-fuel-pump"></i> Fuel Optimization
  </div>
  <div class="card-body">
    <div id="fuelWidget">
      <div class="text-center">
        <div class="spinner-border text-warning" role="status"></div>
        <div class="mt-2">Loading optimization...</div>
      </div>
    </div>
  </div>
</div>
<script>
(async function loadFuel() {
  const container = document.getElementById('fuelWidget');
  const res = await fetchSafeJson('/maritime/api/analytics/fuel-optimization');
  if (res.ok) {
    const opt = (res.data && res.data.optimization) || {};
    container.innerHTML = `
      <div class="text-center">
        <div>Current: ${(opt.current_speed_knots ?? '—')} kn</div>
        <div>Optimal: ${(opt.optimal_speed_knots ?? '—')} kn</div>
        <div class="mt-2"><strong>${(opt.fuel_saving_percent ?? 0)}%</strong> estimated savings</div>
      </div>
    `;
  } else {
    container.innerHTML = `<div class="text-warning">Fuel optimizer unavailable — ${res.message || 'fallback'}</div>`;
  }
})();
</script>
