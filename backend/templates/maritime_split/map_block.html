<div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white">
        <i class="bi bi-map"></i> Live Vessel Map
    </div>
    <div class="card-body">
        <div id="vesselMap" style="height: 400px; border-radius: 8px;"></div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const map = L.map("vesselMap").setView([63.4305, 10.3951], 7);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; OpenStreetMap contributors"
    }).addTo(map);

    fetch("/maritime/api/ships-live")
        .then(r => r.json())
        .then(data => {
            data.forEach(ship => {
                L.marker([ship.lat, ship.lon])
                    .addTo(map)
                    .bindPopup(`<strong>${ship.name}</strong><br>MMSI: ${ship.mmsi}`);
            });
        });
});
</script>
