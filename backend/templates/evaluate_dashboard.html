{% extends "base.html" %}

{% block title %}{{ translate('route_evaluation_dashboard', lang, 'dashboard') }}{% endblock %}

{% block content %}
<h2 class="mb-4">ğŸ›³ï¸ {{ translate('route_evaluation_dashboard', lang, 'dashboard') }}</h2>

<div class="table-responsive">
  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>{{ translate('route_id', lang, 'routes_page') }}</th>
        <th>{{ translate('route_name', lang, 'routes_page') }}</th>
        <th>{{ translate('description', lang, 'routes_page') }}</th>
        <th>{{ translate('number_of_legs', lang, 'routes_page') }}</th>
        <th>{{ translate('status', lang, 'dashboard') }}</th>
        <th>{{ translate('issues', lang, 'dashboard') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for route in routes %}
      <tr class="{% if route.status == 'OK' %}table-success{% elif route.status == 'REROUTE_NEEDED' %}table-danger{% else %}table-warning{% endif %}">
        <td>{{ route.id }}</td>
        <td>{{ route.name }}</td>
        <td>{{ route.description or translate('not_available', lang, 'global') }}</td>
        <td>{{ route.legs|length }}</td>
        <td>{{ translate(route.status.lower(), lang, 'dashboard') }}</td>
        <td>
          {% if route.issues %}
          <ul class="mb-0">
            {% for issue in route.issues %}
            <li>{{ issue }}</li>
            {% endfor %}
          </ul>
          {% else %}
          -
          {% endif %}
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="6" class="text-center">{{ translate('no_routes', lang, 'dashboard') }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
