============================================================
ğŸŒŠ BERGENAVN MARITIME - PROJECT ARCHITECTURE
ğŸ“… Generated: 2026-02-11 14:01:26
ğŸ“ Project root: /home/framg/dev/bergnavn
============================================================

ğŸ“ RELEVANT DIRECTORY STRUCTURE:

â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ analytics_routes.py
â”‚   â”‚   â”œâ”€â”€ api_analytics.py
â”‚   â”‚   â”œâ”€â”€ api_vessels.py
â”‚   â”‚   â”œâ”€â”€ api_weather.py
â”‚   â”‚   â”œâ”€â”€ cruise_routes.py
â”‚   â”‚   â”œâ”€â”€ empirical_analysis_routes.py
â”‚   â”‚   â”œâ”€â”€ main_routes.py
â”‚   â”‚   â”œâ”€â”€ maritime_api.py 
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.ais_fix_backup
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.backup
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.backup_final
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.backup_pre_fix
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.backup_redirect_fix
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.endpoints_backup
â”‚   â”‚   â”œâ”€â”€ maritime_routes.py.final_backup
â”‚   â”‚   â”œâ”€â”€ ml_routes.py
â”‚   â”‚   â”œâ”€â”€ nca_routes.py
â”‚   â”‚   â”œâ”€â”€ recommendation_routes.py
â”‚   â”‚   â”œâ”€â”€ route_routes.py
â”‚   â”‚   â”œâ”€â”€ rtz_data_api.py
â”‚   â”‚   â”œâ”€â”€ scientific_api.py
â”‚   â”‚   â”œâ”€â”€ simulation_routes.py
â”‚   â”‚   â”œâ”€â”€ system_dashboard.py
â”‚   â”‚   â”œâ”€â”€ system_routes.py
â”‚   â”‚   â”œâ”€â”€ turbine_api.py
â”‚   â”‚   â”œâ”€â”€ weather_forecast.py
â”‚   â”‚   â”œâ”€â”€ weather_routes.py
â”‚   â”‚   â””â”€â”€ weather_simple.py
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ais_service.py
â”‚   â”‚   â”œâ”€â”€ alerts_service.py
â”‚   â”‚   â”œâ”€â”€ async_executor.py
â”‚   â”‚   â”œâ”€â”€ barentswatch_service.py
â”‚   â”‚   â”œâ”€â”€ cleanup.py
â”‚   â”‚   â”œâ”€â”€ cruise_service.py
â”‚   â”‚   â”œâ”€â”€ data_integration_service.py
â”‚   â”‚   â”œâ”€â”€ empirical_ais_service.py
â”‚   â”‚   â”œâ”€â”€ empirical_data_analyzer.py
â”‚   â”‚   â”œâ”€â”€ empirical_historical_service.py
â”‚   â”‚   â”œâ”€â”€ empirical_visualization.py
â”‚   â”‚   â”œâ”€â”€ empirical_weather.py
â”‚   â”‚   â”œâ”€â”€ emprical_historical_service.py
â”‚   â”‚   â”œâ”€â”€ final_organized_parser.py
â”‚   â”‚   â”œâ”€â”€ fuel_calculation_service.py
â”‚   â”‚   â”œâ”€â”€ fuel_optimizer_service.py
â”‚   â”‚   â”œâ”€â”€ fuel_service.py
â”‚   â”‚   â”œâ”€â”€ geocode_service.py
â”‚   â”‚   â”œâ”€â”€ hazard_service.py
â”‚   â”‚   â”œâ”€â”€ kystdatahuset_adapter.py
â”‚   â”‚   â”œâ”€â”€ kystdatahuset_adapter.py.complete_backup
â”‚   â”‚   â”œâ”€â”€ kystverket_ais_service.py
â”‚   â”‚   â”œâ”€â”€ maritime_service.py
â”‚   â”‚   â”œâ”€â”€ met_norway_service.py
â”‚   â”‚   â”œâ”€â”€ port_service.py
â”‚   â”‚   â”œâ”€â”€ recommendation_engine.py
â”‚   â”‚   â”œâ”€â”€ risk_engine.py
â”‚   â”‚   â”œâ”€â”€ route_evaluator.py
â”‚   â”‚   â”œâ”€â”€ route_leg_service.py
â”‚   â”‚   â”œâ”€â”€ route_service.py
â”‚   â”‚   â”œâ”€â”€ rtz_generator.py
â”‚   â”‚   â”œâ”€â”€ rtz_integration.py
â”‚   â”‚   â”œâ”€â”€ rtz_loader_fixed.py
â”‚   â”‚   â”œâ”€â”€ rtz_parser.py
â”‚   â”‚   â”œâ”€â”€ schedule_service.py
â”‚   â”‚   â”œâ”€â”€ scientific_truth_service.py
â”‚   â”‚   â”œâ”€â”€ sea_depth_service.py
â”‚   â”‚   â”œâ”€â”€ smart_weather_service.py
â”‚   â”‚   â”œâ”€â”€ timezone_service.py
â”‚   â”‚   â”œâ”€â”€ validation_service.py
â”‚   â”‚   â”œâ”€â”€ weather_dl.py
â”‚   â”‚   â”œâ”€â”€ weather_integration_service.py
â”‚   â”‚   â”œâ”€â”€ weather_service.py
â”‚   â”‚   â””â”€â”€ weather_sync.py
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ utils/
â”‚       â”‚   â””â”€â”€ db_check.py
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ distance_utils.py
â”‚       â”œâ”€â”€ empirical_rtz_data.py
â”‚       â”œâ”€â”€ helpers.py
â”‚       â”œâ”€â”€ port_coordinates.py
â”‚       â”œâ”€â”€ route_deduplicator.py
â”‚       â”œâ”€â”€ rtz_filename_parser.py
â”‚       â”œâ”€â”€ rtz_loader.py
â”‚       â””â”€â”€ translations.py
â”œâ”€â”€ data/
â”œâ”€â”€ database/
â”œâ”€â”€ frontend/
â”œâ”€â”€ models/
â”œâ”€â”€ static/
â”œâ”€â”€ .coverage
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ 7c647aadeec2,
â”œâ”€â”€ activate_rtz_now.py
â”œâ”€â”€ activate_rtz_routes.py
â”œâ”€â”€ add_missing_endpoints.py
â”œâ”€â”€ add_routes_to_map.py
â”œâ”€â”€ add_turbine_alerts.py
â”œâ”€â”€ alembic.ini
â”œâ”€â”€ app.py
â”œâ”€â”€ app.py.backup_blueprints_20260118_151627
â”œâ”€â”€ app.py.backup_indent
â”œâ”€â”€ app_clean.py
â”œâ”€â”€ app_minimal_backup.py
â”œâ”€â”€ babel.cfg
â”œâ”€â”€ backup_before_migration.sql
â”œâ”€â”€ backup_simulation.sh
â”œâ”€â”€ barentswatch_test_20251225_115245.json
â”œâ”€â”€ check_config.py
â”œâ”€â”€ check_dashboard.py
â”œâ”€â”€ check_dashboard_data.py
â”œâ”€â”€ check_database_reality.py
â”œâ”€â”€ check_migration_health.py
â”œâ”€â”€ check_real_routes.py
â”œâ”€â”€ check_reality.py
â”œâ”€â”€ check_results.py
â”œâ”€â”€ check_routes.py
â”œâ”€â”€ check_rtz_format.py
â”œâ”€â”€ check_secret.py
â”œâ”€â”€ complete_port_fix.py
â”œâ”€â”€ comprehensive_test.py
â”œâ”€â”€ correct_api_test.py
â”œâ”€â”€ create_data_inventory.py
â”œâ”€â”€ debug_health_endpoint.py
â”œâ”€â”€ debug_server.py
â”œâ”€â”€ debug_simulation.js
â”œâ”€â”€ dev_check.py
â”œâ”€â”€ dev_check_output.txt
â”œâ”€â”€ diagnose_rtz_issue.py
â”œâ”€â”€ diff_side_by_side.txt
â”œâ”€â”€ docker-compose.migrate.yml
â”œâ”€â”€ dump_project.sh
â”œâ”€â”€ dump_project_split.sh
â”œâ”€â”€ e6bf137bbda9,
â”œâ”€â”€ ers
â”œâ”€â”€ example.env
â”œâ”€â”€ export_structure.py
â”œâ”€â”€ final_complete_fix.py
â”œâ”€â”€ final_fix.py
â”œâ”€â”€ final_rtz_reorganization.py
â”œâ”€â”€ final_system_test.py
â”œâ”€â”€ find_real_count.py
â”œâ”€â”€ fix_ais_adapter.py
â”œâ”€â”€ fix_ais_api.py
â”œâ”€â”€ fix_ais_complete.py
â”œâ”€â”€ fix_all_issues_final.py
â”œâ”€â”€ fix_and_activate_rtz.py
â”œâ”€â”€ fix_clock_and_map.py
â”œâ”€â”€ fix_dashboard_complete.py
â”œâ”€â”€ fix_dashboard_final.py
â”œâ”€â”€ fix_dashboard_routes.py
â”œâ”€â”€ fix_duplicate.py
â”œâ”€â”€ fix_duplicates.py
â”œâ”€â”€ fix_exact_route.py
â”œâ”€â”€ fix_final_issues.py
â”œâ”€â”€ fix_health_endpoint.py
â”œâ”€â”€ fix_indentation.py
â”œâ”€â”€ fix_map_conflict.py
â”œâ”€â”€ fix_map_routes_display.py
â”œâ”€â”€ fix_maritime_routes_now.py
â”œâ”€â”€ fix_maritime_simulation.py
â”œâ”€â”€ fix_maritime_system.py
â”œâ”€â”€ fix_port_names.py
â”œâ”€â”€ fix_route_realistic.py
â”œâ”€â”€ fix_route_with_actual_data.py
â”œâ”€â”€ fix_rtz_duplicates.py
â”œâ”€â”€ fix_rtz_integration.py
â”œâ”€â”€ fix_rtz_integration_smart.py
â”œâ”€â”€ fix_rtz_properly.py
â”œâ”€â”€ fix_rtz_routes.py
â”œâ”€â”€ fix_rtz_structure.py
â”œâ”€â”€ fix_simulation.py
â”œâ”€â”€ fix_simulation_conflict.py
â”œâ”€â”€ fix_simulation_issues.py
â”œâ”€â”€ fix_simulation_loading.py
â”œâ”€â”€ fix_simulation_now.py
â”œâ”€â”€ fix_simulation_priority.py
â”œâ”€â”€ fix_simulation_redirect.py
â”œâ”€â”€ fix_simulation_template.py
â”œâ”€â”€ fix_simulation_template.sh
â”œâ”€â”€ fix_slow_search.py
â”œâ”€â”€ fix_template_completely.py
â”œâ”€â”€ fix_template_error.py
â”œâ”€â”€ fix_vessel_movement.py
â”œâ”€â”€ fix_xml_encoding.py
â”œâ”€â”€ full_system_check.py
â”œâ”€â”€ git_backup.sh
â”œâ”€â”€ git_progress_tracker.py
â”œâ”€â”€ how HEAD --stat
â”œâ”€â”€ init_db.py
â”œâ”€â”€ install_rtz_fix.sh
â”œâ”€â”€ maritime_architecture_20260211_1401.txt
â”œâ”€â”€ migration_check.py
â”œâ”€â”€ migration_check_output.txt
â”œâ”€â”€ performance_test.py
â”œâ”€â”€ project_data_inventory.txt
â”œâ”€â”€ project_export.zip
â”œâ”€â”€ project_history.txt
â”œâ”€â”€ project_st
â”œâ”€â”€ project_structure.txt
â”œâ”€â”€ proper_api_test.py
â”œâ”€â”€ readme.md
â”œâ”€â”€ real_norwegian_coastal_routes.py
â”œâ”€â”€ real_route_discovery.json
â”œâ”€â”€ remaining_problems.txt
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ requirements_notebook.txt
â”œâ”€â”€ route_analysis.txt
â”œâ”€â”€ rtz_fixer.log
â”œâ”€â”€ rtz_processing.log
â”œâ”€â”€ rtz_zip_fixer.py
â”œâ”€â”€ rtz_zip_fixer_final.py
â”œâ”€â”€ run_and_test.py
â”œâ”€â”€ run_checks.sh
â”œâ”€â”€ run_validation.sh
â”œâ”€â”€ run_with_debug.py
â”œâ”€â”€ safe_fix_routes.sql
â”œâ”€â”€ safe_migrate.py
â”œâ”€â”€ safe_test.py
â”œâ”€â”€ setup_translations.py
â”œâ”€â”€ split_files.py
â”œâ”€â”€ switch_to_nca_api.py
â”œâ”€â”€ system_check.py
â”œâ”€â”€ system_summary.md
â”œâ”€â”€ test_api_endpoints.py
â”œâ”€â”€ test_api_fixed.py
â”œâ”€â”€ test_barentswatch_api.py
â”œâ”€â”€ test_barentswatch_auth.py
â”œâ”€â”€ test_barentswatch_fixed.py
â”œâ”€â”€ test_blueprints.sh
â”œâ”€â”€ test_route_fix.py
â”œâ”€â”€ test_rtz.py
â”œâ”€â”€ test_rtz_final.py
â”œâ”€â”€ test_rtz_integration.py
â”œâ”€â”€ test_simple.py
â”œâ”€â”€ test_simple_health.py
â”œâ”€â”€ test_simulation.sh
â”œâ”€â”€ update_alembic_version.sql
â”œâ”€â”€ update_dashboard_buttons.py
â”œâ”€â”€ validate_config.py
â”œâ”€â”€ validate_models.py
â”œâ”€â”€ validation_output.txt
â”œâ”€â”€ verify_fix.py
â”œâ”€â”€ verify_fixes.py
â”œâ”€â”€ verify_health_fix.py
â””â”€â”€ your_plan.md

============================================================
ğŸ“‹ CRITICAL MARITIME FILES
============================================================
âœ… app.py                                             - Main Flask application
âœ… backend/routes/maritime_routes.py                  - Maritime dashboard blueprint
âœ… backend/routes/main_routes.py                      - Home/Legal/About routes
âœ… backend/routes/route_routes.py                     - Routes page (optional)
âœ… backend/services/empirical_historical_service.py   - Scientific empirical fallback
âœ… backend/services/barentswatch_service.py           - Real-time AIS
âœ… backend/services/met_norway_service.py             - Real-time weather
âœ… backend/rtz_loader_fixed.py                        - RTZ route loader
âœ… backend/templates/base.html                        - Base template
âœ… backend/templates/maritime_split/dashboard_base.html - Dashboard template
âœ… backend/templates/maritime_split/realtime_simulation.html - Simulation template
âœ… backend/static/js/split/maritime_map.js            - Map JavaScript
âœ… backend/static/js/split/ais_realtime.js            - AIS JavaScript
âœ… backend/utils/translations.py                      - Translations (if used)
âœ… .env                                               - Environment variables (API keys)

============================================================
ğŸ”Œ MARITIME API ENDPOINTS
============================================================

ğŸ“Œ Direct endpoints in app.py:
   â€¢ /
   â€¢ /<lang>
   â€¢ /api/health
   â€¢ /api/simple-weather
   â€¢ /maritime/api/ais-data
   â€¢ /maritime/api/rtz/complete
   â€¢ /maritime/api/rtz/routes
   â€¢ /maritime/api/vessels/empirical-status
   â€¢ /maritime/api/vessels/real-time
   â€¢ /maritime/api/weather-dashboard

ğŸ“Œ Maritime blueprint endpoints:
   â€¢ /maritime/api/ais-data
   â€¢ /maritime/api/health
   â€¢ /maritime/api/rtz-status
   â€¢ /maritime/api/rtz/routes
   â€¢ /maritime/api/weather-dashboard
   â€¢ /maritime/dashboard
   â€¢ /maritime/simulation-dashboard
   â€¢ /maritime/simulation-dashboard/<lang>

ğŸ“Œ Maritime view functions (CRITICAL for url_for):
   â€¢ maritime.maritime_dashboard
   â€¢ maritime.simulation_dashboard

============================================================
ğŸ“Š ARCHITECTURE SUMMARY
============================================================

âœ… Total NCA routes: 34
âœ… Blueprints: maritime, main, routes, api_weather
âœ… Real-time services: BarentsWatch, MET Norway
âœ… Scientific fallback: empirical_historical_service

ğŸš€ Run with: python app.py
ğŸŒ Dashboard: http://localhost:5000/maritime/dashboard
ğŸ® Simulation: http://localhost:5000/maritime/simulation-dashboard/en
============================================================
